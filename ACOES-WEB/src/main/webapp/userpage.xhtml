<ui:composition template="WEB-INF/Templates/menu.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html">
    <ui:define name="titulo">Usuario normal</ui:define>
    <ui:define name="contenido">
        <head>
            <link rel="stylesheet" href="css/tabla.css"/>
        </head>
        <c:choose>
            <!--@elvariable id="ctrlsocio" type="com.SII.vista.ControlSocio"-->
            <!--@elvariable id="controlAutorizacion" type="com.SII.vista.ControlAutorizacion"-->
            <!--@elvariable id="controlben" type="com.SII.vista.ControlBeneficiario"-->
            <!--@elvariable id="u" type="com.SII.entidades.Usuario"-->
            <c:when test="#{empty ctrlsocio.buscar(u)}">
                <h:form id="apadrinarPrimeraVez">
                    Aún no has apadrinado ¿Quieres?


                    <h:commandButton value="Comenzar"
                                     action="#{ctrlsocio.apadrinar(controlAutorizacion.usuario,controlben.beneficiarios)}"
                                     styleClass="btn-borde"/>
                </h:form>
            </c:when>
            <c:otherwise>
                <ui:repeat value="#{ctrlsocio.buscar(controlAutorizacion.usuario).toArray()}" var="niño">
                    <ol class="lista">
                        <li>
                            <label>Identificador:#{niño.beneficiario.nombre} </label>
                        </li>
                    </ol>
                </ui:repeat>
                <h:form id="apadrinar">
                    <h:commandButton value="Apadrina"
                                     action="#{ctrlsocio.apadrinar(controlAutorizacion.usuario,controlben.beneficiarios)}"
                                     styleClass="btn-borde"/>
                </h:form>

                Notificaciones
                <div id="main-container">
                    <h:form>
                        <table>
                            <thead>
                            <tr>
                                <th>Codigo</th>
                                <th>Fecha</th>
                            </tr>
                            </thead>
                            <ui:repeat value="#{ctrlsocio.getNotificaciones(controlAutorizacion.usuario)}"
                                       var="notificacion">
                                <tr>
                                    <td>#{notificacion.id}</td>
                                    <td>#{notificacion.fecha}</td>
                                </tr>
                            </ui:repeat>
                        </table>
                    </h:form>
                </div>

            </c:otherwise>
        </c:choose>
    </ui:define>
</ui:composition>


